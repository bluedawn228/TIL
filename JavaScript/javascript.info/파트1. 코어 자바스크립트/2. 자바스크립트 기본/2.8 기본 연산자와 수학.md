# 기본연산자와 수학
덧셈 +, 곱셈 *, 뺄셈 -과 같은 연산은 학교에서 배워서 이미 알고 계실 겁니다.  
이번 챕터에서는 이런 기본 연산자를 시작으로 학교에선 다루지 않았던 `자바스크립트에서만 제공하는 연산자`에 대해 배워보겠습니다.  

## 용어: ‘단항’, ‘이항’, ‘피연산자’
연산자에 대해 학습하기 전에, 앞으로 자주 등장하게 될 용어 몇 가지를 정리해 보겠습니다.  
'피연산자’는 '인수(argument)'라는 용어로 불리기도 합니다.  

## 수학
자바스크립트에서 지원하는 수학 연산자는 다음과 같습니다.  

덧셈 연산자 +,  
뺄셈 연산자 -,  
곱셈 연산자 *,  
나눗셈 연산자 /,  
나머지 연산자 %,  
거듭제곱 연산자 ** : (2 ** 3 -> 2 * 2 * 2)  

거듭제곱 연산자는 정수가 아닌 숫자에 대해서도 동작합니다. 1/2, 1/3 을 사용하면 제곱근, 세제곱근을 구할 수 있죠.  

## 이항 연산자 '+'와 문자열 연결
자바랑 같다.  

```javascript
alert(2 + 2 + '1' ); // '221'이 아니라 '41'이 출력됩니다.
```
연산은 왼쪽에서 오른쪽으로 순차적으로 진행되기 때문에 이런 결과가 나왔습니다.  

이처럼 이항 덧셈 연산자 +는 문자열 연결과 변환이라는 특별한 기능을 제공합니다. 다른 산술 연산자가 오직 숫자형의 피연산자만 다루고, `피연산자가 숫자형이 아닌 경우`에 그 형을 `숫자형으로 바꾸는 것과는 대조적`입니다.  
```javascript
alert( 6 - '2' ); // 4, '2'를 숫자로 바꾼 후 연산이 진행됩니다.
alert( '6' / '2' ); // 3, 두 피연산자가 숫자로 바뀐 후 연산이 진행됩니다.
```

## 단항 연산자 +와 숫자형으로의 변환
덧셈 연산자 +는 `이항` 연산자뿐만 아니라 `단항` 연산자로도 사용할 수 있습니다.  

숫자에 단항 덧셈 연산자를 붙이면 이 연산자는 `아무런 동작도 하지 않습니다.` 그러나 피연산자가 숫자가 아닌 경우엔 `숫자형으로의 변환!!!!`이 일어납니다.  

예시:  
```javascript
let x = 1;
alert(+x);

let y = -2;
alert(+y);

alert(+true)//
alert(+"")//
```
단항 덧셈 연산자는 짧은 문법으로도 Number(...)와 동일한 일을 할 수 있게 해줍니다.  

개발을 하다 보면 `문자열을 숫자로 변환해야 하는 경우가 자주 생깁니다.` HTML **폼(form)** 필드에서 `값을 가져왔는데 그 값이 문자형일 때` 같이 말이죠. 실제로 `폼에서 가지고 온 값은 대개 문자열 형태`입니다.  

```javascript
let apples = "2";
let oranges = "3";

alert(+apples + +oranges);

alert(Number(apples) + Number(oranges));
```

그런데 왜 이항 덧셈 연산자가 적용되기 전에 단항 덧셈 연산자가 먼저 적용될까요? 그 이유는 이제 학습하게 될 연산자 우선순위 때문입니다.

## 연산자 우선순위
자바스크립트에서 정의한 연산자 우선순위가 마음에 들지 않는다면, 괄호를 사용하면 됩니다. 괄호는 모든 연산자보다 우선순위가 높기 때문에 자바스크립트에서 정의한 연산자 우선순위를 무력화시킵니다.  

우선순위 숫자가 클수록 먼저 실행됩니다. 순위가 같으면 왼쪽부터 시작해서 오른쪽으로 연산이 수행됩니다.  

아래는 우선순위 테이블(precedence table)의 일부를 발췌한 표입니다.  

|순위|연산자 이름|기호|
|------|---|---|
|...|...|...|
|17|단항 덧셈|+|
|17|단항 부정|-|
|16|지수|**|
|15|곱셈|*|
|15|나눗셈|/|
|13|덧셈|+|
|13|뺄셈|-|
|...|...|...|
|3|할당|=|
|...|...|...|

'단항 덧셈 연산자’는 우선순위 17로, '(이항) 덧셈 연산자’의 우선순위 13보다 높습니다. 표현식 "+apples + +oranges"에서 단항 덧셈 연산자가 덧셈보다 먼저 수행되는 이유가 바로 이 때문입니다.  

## 할당 연산자
우선순위는 3으로 아주 낮습니다.  

**값을 반환하는 할당 연산자**  
=는 연산자이기 때문에 흥미로운 함축성을 내포하고 있습니다.  
자바스크립트에서 대부분의 연산자들은 값을 반환합니다. +와 -뿐만 아니라 `= 역시 값을 반환하죠.`  
x = value을 호출하면 value가 x에 쓰여지고, 이에 더하여 `value가 반환됩니다.`  
할당 연산자의 이런 특징을 이용한 복잡한 표현식을 살펴봅시다.  
```javascript
let a = 1;
let b = 2;

let c = 3 - (a = b + 1);

alert(a);
alert(c);
```
괴상한 코드라고 느껴지겠지만, 여러 자바스크립트 라이브러리에서 이런 식으로 할당 연산자를 사용하고 있기 때문에 동작 원리를 이해할 수 있어야 합니다.  

다만, 직접 코드를 작성할 땐 이런 방식을 사용하지 않기를 바랍니다. 이런 트릭을 사용하면 코드가 명확하지 않을 뿐만 아니라 가독성도 떨어지기 때문입니다.

**할당 연산자 체이닝**  
할당 연산자는 아래와 같이 여러 개를 연결할 수도 있습니다(체이닝).  
```javascript
let a, b, c;

a = b = c = 2 + 2;
```
그런데 되도록이면 연산자를 체이닝 하는것 보다 가독성을 위해 줄을 나눠 코드를 작성하길 권유드립니다  

## 복합 할당 연산자
+=, *=  
이런 ‘복합 할당’ 연산자는 산술 연산자와 `비트 연산자`에도 적용할 수 있습니다. /=, -= 등의 연산자를 만들 수 있죠.  

복합 할당 연산자의 우선순위는 할당 연산자와 동일합니다. 따라서 대부분 다른 연산자가 실행된 후에 복합 할당 연산자가 실행됩니다.  

## 증가·감소 연산자  
++, --  
**중요 : 증가/감소 연산자는 변수에만 쓸 수 있습니다. 5++와 같이 값에 사용하려고 하면 에러가 발생합니다.**  

이미 배운 바와 같이 모든 연산자는 값을 `반환`합니다. 전위형은 증가/감소 후의 새로운 값을 반환하는 반면, 후위형은 증가/감소 전의 기존 값을 반환합니다.  

**다른 연산자 사이의 증가/감소 연산자**  
++/-- 연산자를 표현식 중간에 사용하는 것도 가능합니다. 이때, 증가/감소 연산자의 우선순위는 다른 대부분의 산술 연산자보다 높기 때문에, 평가가 먼저 이뤄집니다.  
```javascript
let counter = 1;
alert( 2 * ++counter);
```
이렇게 코드를 작성하는 게 기술적으로 문제가 있는 것은 아니지만, 한 줄에서 여러 가지 일을 동시에 하고 있기 때문에 코드의 가독성이 떨어집니다.  
코드를 읽을 때 눈을 ‘수직으로’ 빠르게 움직이다 보면 counter++와 같은 것을 놓치기 쉽습니다. 변수가 증가했다는 것을 놓칠 수 있죠.  

## 비트연산자
비트 연산자(bitwise operator)는 인수를 `32비트 정수로 변환`하여 이진 연산을 수행합니다.  
이런 비트 조작 관련 연산자는 자바스크립트뿐만 아니라 대부분의 프로그래밍 언어에서 지원합니다.  
비트 AND ( & )  
비트 OR ( | )  
비트 XOR ( ^ )  
비트 NOT ( ~ )  
왼쪽 시프트(LEFT SHIFT) ( << )  
오른쪽 시프트(RIGHT SHIFT) ( >> )  
부호 없는 오른쪽 시프트(ZERO-FILL RIGHT SHIFT) ( >>> )  

비트 연산자는 저수준(2진 표현)에서 숫자를 다뤄야 할 때 쓰이므로 흔하게 쓰이진 않습니다. 웹 개발 시엔 이런 일이 자주 일어나지 않기 때문에 비트 연산자를 만날 일은 거의 없죠. 그렇긴 해도 암호를 다뤄야 할 땐 비트 연산자가 유용하기 때문에 때가 되면 MDN의 비트 연산자 문서를 보시는 걸 추천합니다.  

## 쉼표 연산자
좀처럼 보기 힘들고, 특이한 연산자 중 하나입니다. 코드를 짧게 쓰려는 의도로 가끔 사용됩니다. 이런 코드를 만났을 때, 어떤 연산 결과가 도출되는지 알아야 하므로 쉼표 연산자에 대해 알아보도록 합시다.  
쉼표 연산자 ,는 여러 표현식을 코드 한 줄에서 `평가`할 수 있게 해줍니다. 이때 표현식 각각이 모두 평가되지만, 마지막 표현식의 평가 결과만 반환되는 점에 유의해야 합니다.  
```javascript
let a = (1 + 2, 3 + 4);
alert(a); // 7 (3 + 4의 결과)
```
위 예시에서 첫 번째 표현식 1 + 2은 평가가 되지만 그 결과는 버려집니다. 3 + 4만 평가되어 a에 할당되죠.  

**쉼표의 우선순위는 매우 낮습니다.**  
쉼표 연산자의 연산자 우선순위는 매우 낮습니다. 할당 연산자 = 보다 더 낮죠. 따라서 위 예시에선 `괄호`가 중요한 역할을 합니다.  
괄호가 없으면 a = 1 + 2, 3 + 4에서 +가 먼저 수행되어 a = 3, 7이 됩니다. 할당 연산자 =는 쉼표 연산자보다 우선순위가 높기 때문에 a = 3이 먼저 실행되고, 나머지(7)는 무시되죠. (a = 1 + 2), 3 + 4를 연산한 것처럼 될 겁니다.  

이렇게 마지막 표현식을 제외한 모든 것을 버리는 연산자는 어디서 사용되는 걸까요?  
여러 동작을 하나의 줄에서 처리하려는 복잡한 구조에서 이를 사용합니다.  
아래와 같이 말이죠.  
```javascript
// 한 줄에서 세 개의 연산이 수행됨
for(a = 1, b = 3, c = a *b; a < 10; a++) {
    ...
}
```
쉼표 연산자를 사용한 트릭은 여러 자바스크립트 프레임워크에서 볼 수 있습니다. 이 연산자의 사용 빈도가 높지 않지만, 언급하고 넘어가는 이유이죠. 쉼표 연산자는 코드 가독성에 도움이 되지 않습니다. 따라서 곰곰이 생각해 본 후, 진짜 필요한 경우에만 사용하시길 바랍니다. 

## 과제
### 형변환
예측하라
```
"" + 1 + 0
"" - 1 + 0
true + false
6 / "3"
"2" * "3"
4 + 5 + "px"
"$" + 4 + 5
"4" - 2
"4px" - 2
7 / 0
"  -9  " + 5
"  -9  " - 5
null + 1
undefined + 1
" \t \n" - 2
```
답
```
"" + 1 + 0 = "10" // (1)
"" - 1 + 0 = -1 // (2)
true + false = 1
6 / "3" = 2
"2" * "3" = 6
4 + 5 + "px" = "9px"
"$" + 4 + 5 = "$45"
"4" - 2 = 2
"4px" - 2 = NaN
7 / 0 = Infinity
"  -9  " + 5 = "  -9  5" // (3)
"  -9  " - 5 = -14 // (4)
null + 1 = 1 // (5)
undefined + 1 = NaN // (6)
" \t \n" - 2 = -2 // (7)
```
1. 피 연산자 중 하나가 문자열인 "" + 1에서 1은 문자형으로 변환됩니다. 따라서 공백과 문자열 1을 더한, "" + 1 = "1"과 같은 효과를 발휘하죠. 그다음 연산 "1" + 0에도 같은 규칙이 적용됩니다.
2. 뺄셈 연산자 -는 기타 수학 연산자처럼 숫자형만을 인수로 받습니다. 빈 문자열 ""는 숫자 0으로 변환되기 때문에 결과는 -1이 됩니다.
3. 피 연산자 중 하나가 문자열이므로 숫자 5가 문자열로 변환됩니다.
4. 뺄셈 연산자는 인수를 숫자형으로 변화시키므로 " -9 "는 숫자 -9로 변합니다. 앞, 뒤 공백은 제거되죠.
5. 숫자형으로 변환 시 null은 0이 됩니다.
6. `undefined`는 숫자형으로 변환시 `NaN`이 됩니다.
7. 문자열이 숫자형으로 변할 땐 문자열 앞뒤의 `공백`이 삭제됩니다. 뺄셈 연산자 앞의 피연산자는 `공백을 만드는 문자` \t와 \n, 그 사이의 `“일반적인” 공백으로 구성`됩니다. 따라서 " \t \n"는 숫자형으로 변환 시 길이가 0인 문자열로 취급되어 숫자 0이 됩니다.  

### 덧셈 고치기
3으로 나오게 고쳐라
```javascript
let a = prompt("덧셈할 첫 번째 숫자를 입력해주세요.", 1);
let b = prompt("덧셈할 두 번째 숫자를 입력해주세요.", 2);

alert(a + b); // 12
```
답
```javascript
let a = +prompt("덧셈할 첫 번째 숫자를 입력해주세요.", 1);
let b = +prompt("덧셈할 두 번째 숫자를 입력해주세요.", 2);

alert(a + b); // 3
```
또는
```javascript
let a = prompt("덧셈할 첫 번째 숫자를 입력해주세요.", 1);
let b = prompt("덧셈할 두 번째 숫자를 입력해주세요.", 2);

alert(+a + +b); // 3
```
코드 한 줄 안에서 단항, 이항 + 연산자를 한꺼번에 쓰니 조금 웃겨 보이네요.