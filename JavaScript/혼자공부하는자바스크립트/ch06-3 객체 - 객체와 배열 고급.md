# ch06-3 객체와 배열 고급
핵심 키워드 : 속성 존재여부 확인, 다중 할당, 얕은복사(참조 복사), 깊은 복사  
이번절은 자바스크립트를 활용해서 리액트, 뷰 프레임워크 등을 개발할 때 사용하는 내용이다. 현재 단계에서는 꽤 어려울 수 있지만 이런문법도 있구나 정도로 알아두면 관련된 내용이 나왔을때 당황하지 않을수잇다  
## 0 시작하기전에
이번절의 내용은 객체와 관련된 고급에 속하는 내용이다. 다 배우고 나도 이걸 언제 어떻게 활용해야하지 라는 생각이 드는 내용들이다. 그러나 자바스크립트를 공부하는 과정에서 계속 만나게 될 내용으로 개념만이라도 확실히 이해하고 기억해두자.  

## 1 속성 존재 여부 확인
객체 내부에 어떤 속성이 있는지 확인해보는 코드는 굉장히 자주 사용하는 코드이다.  
객체에 `없는 속성`에 접근하면 `undefined 자료형`이 나온다. 따라서 조건문으로 undefined인지 아닌지 확인하면 속성 존재 여부를 확인할 수 있다.  
```javascript
const object = {
    name : '혼자 공부하는 파이썬',
    price : 180000,
    publisher : '한빛미디어'
}

if (object.name !== undefined) {
    console.log('name 속성이 있습니다')
} else {
    console.log('name 속성이 없습니다')
}

if(object.author !== undefined) {
    console.log('author 속성이 있습니다')
} else {
    console.log('author 속성이 없습ㅂ니다')
}
```
간단한 코드이지만 일반적으로 더 간단하게 검사하려고 다음과 같이 사용하기도 한다. 객체의 특정 속성이 false로 변환될 수 있는 값(0, false, 빈 문자열 등)이 아닐때 사용하는 코드이다.  
```javascript
if (object.name) {
    console.log('name 속성이 있다')
} else {
    console.log('name 속성이 없다')
}

if (object.author) {
    console.log('author 속성이 있다')
} else {
    console.log('author 속성이 없다')
}
```
책 제목이 빈문자열이면 데이터가 없는거나 마찬가지다. 따라서 절대 false로 변환될수있는 값이 아닐것이다. `이와 같은 전제가 있어야` 안전하게 사용할 수 있는 코드이다.  
더짧게 사용한다면 다음과 같은 짧은 조건문을 쓸 수 도 있다.  
```javascript
object.name || console.log('name 속성이 있다.')
object.author || console.log('author 속성이 있다.')
```
????  
이러한 내용을 활용해서 객체의 기본속성을 지정하는 경우도 많다. 객체의 속성이 있는지 확인하고 있다면 해당 속성을, 없다면 별도의 문자열을 지정하는 코드이다.  
```javascript
const object = {
    name : '혼자 공부하는 파이썬',
    price : 180000,
    publisher : '한빛미디어'
}

object.name = object.name !== undefined ? object.name : '제목 미정'
object.author = object.author !== undefined ? object.author : '저자 미상'

console.log(JSON.stringify(object, null ,2))
```
이전과 마찬가지로 `속성이 false로 변환될수 있는 값이 들어오지 않을거라는 전제가 있으면` 다음과 같이 짧은 조건문으로도 구현할 수 있다. 실제로 개발자들이 이런 코드를 많이 활용하니 꼭 기억하자. 
```javascript
// 객체의 기본속성을 지정합니다.
object.name = object.name || '제목 미정'
object.author = object.author || '저자 미상'
```

## 2 배열 기반의 다중 할당
최신 자바스크립트부터 `배열과 비슷한 작성 방법`으로 한 번에 여러 개의 변수에 값을 할당하는 다중 할당 기능이 추가되었다.  
```
다중할당
[식별자, 식별자, 식별자, ...] = 배열
```

```console
> let [a, b] = [1, 2]
undefined
> console.log(a,b)
1, 2
undefined

> [a, b] = [b, a]
(2) [2, 1]
> console.log(a, b)
2, 1 
undefined
```
할당 연산자 왼쪽에 식별자(변수 또는 상수)의 배열을 넣고, 오른쪽에 배열을 위치시키면 배열의 위치에 맞게 값들이 할당된다. 처음에 [a, b] = [1, 2] 라고 할당했으므로 a에 1이 할당되고, b에 2가 할당된다. 이때 let [a, b] 형태로 선언했으므로 a, b는 변수가 된다.  
참고로 1. 배열의 크기는 같을 필요도 없고, 2. const 키워드로도 사용할 수 있다.  
```console
> let arrayA = [1, 2, 3, 4, 5]
undefined
> const [a, b, c] = arrayA
undefined
> console.log(a,b,c)
1 2 3
undefined
```
배열 기반의 다중 할당은 자주 사용되는 내용은 아니다. 하지만 객체 기반의 다중 할당은 자주 사용된다.  

## 3 객체 기반 다중 할당
최신 자바스크립트는 객체 내부에 있는 속성을 꺼내서 변수로 할당할 때 다음과 같은 코드를 사용할 수 있다.  
```
객체 속성꺼내서 다중 할당하기
{ 속성 이름, 속성 이름} = 객체
{ 식별자 = 속성 이름, 식별자 = 속성 이름} = 객체
```
```javascript
const object = {
    name : '혼자',
    price : 180,
    publisher : '한빛'
}
// 객체에서 변수를 추출한다
const { name, price} = object // name 속성과 price 속성을 그대로 꺼낸다.
console.log(name, price)

const { a=name, b=price} = object // name 속성을 a라는 이름으로, price 속성을 b라는 이름으로 꺼낸다
console.log(a,b)
```

다중 할당 구문을 이해하고 있어야 이후에 import 구문 등을 복잡하게 사용할 때도 쉽게 활용할 수있다. 초급 단계에서는 거의 사용되지 않지만, 나중엔 무조건 활용하는 코드이다.  

## 4 배열 전개 연산자
배열과 객체는 할당할 때 얕은 복사라는 것이 이루어진다.  
```javascript
const 물건_200301 = ['우유', '식빵']
const 물건_200302 = 물건_200301
물건_200302.push('고구마')
물건_200302.push('토마토')

console.log(물건_200301)
console.log(물건_200302)
```
이렇게 복사했을때 다른 이름이 붙을 뿐인것을 얕은복사(참조 복사)라고 한다.  

참조복사와 관련된 자세한 내용은 메모리의 구조와 자바스크립트가 자료를 저장하는 방식을 이해해야 확실하게 알 수 있다.  
깊은 복사는 복사한 두 배열이 완전히 독립적으로 작동하는 것이다. 자바스크립트 개발에서 깊은 복사를 클론clone을 만드는 것이라고 표현하기도 한다. 과거에는 깊은 복사를 하려고 반복문을 활용한 긴 코드를 사용하기도 했으나, 최신 자바스크립트에서는 전개 연산자를 사용해 다음과 같이 입력하기만 하면된다.  
```
전개연산자를 사용한 배열복사
[...배열]
```
이렇게 하면 이전과 다르게 두 배열이 독립적으로 작동한다.  
```javascript
const 물건_200301 = ['우유', '식빵']
const 물건_200302 = [...물건_200301]
물건_200302.push('고구마')
물건_200302.push('토마토')

console.log(물건_200301)
console.log(물건_200302)
```
위와 같이 복사한 뒤에 자료를 추가하는 코드도 많이 사용되므로 다음과 같은ㅇ 패턴으로 쉽게 작성할 수 있다. 전개 연산자로 배열을 전개하고 뒤에 자료를 추가한다.
```
전개 연산자를 사용한 배열요소 추가
[...배열, 자료, 자료, 자료]
```
```javascript
const 물건_200301 = ['우유', '식빵']
const 물건_200302 = ['고구마', ...물건_200301, '토마토']

console.log(물건_200301)
console.log(물건_200302)
```
전개 연산자를 입력한 곳에 배열이 전개되어 들어가는 것뿐이므로 다음과 같이 배열을 여러 번 전개 할 수도 있다. 또한 다른 2개이상의 배열을 붙일때도 활용할 수도 있다.  
```console
> const a = ['우유', '식빵']
undefined
> const b = ['고구마', '토마토']
undefined
> [...a, ...b]
(4) ["우유", "식빵", "고구마", "토마토"]
> [...b, ...a]
(4) ["고구마", "토마토", "우유", "식빵"]
```

## 5 객체 전개 연산자
객체도 깊은 복사를 할때 전개 연산자를 활용할 수 있다.
```
{...객체}
```
```javascript
const 구름 = {
    이름: '구름',
    나이: 6,
    종족: '강아지'
}
const 별 = 구름
별.이름 = '별'
별.나이 = 1

console.log(JSON.stringify(구름))
console.log(JSON.stringify(별))
```
깊은복사를 하자  
```javascript
const 구름 = {
    이름: '구름',
    나이: 6,
    종족: '강아지'
}
const 별 = {...구름}
별.이름 = '별'
별.나이 = 1

console.log(JSON.stringify(구름))
console.log(JSON.stringify(별))
```
역시 추가로 자료를 넣을수도 있다
```
{...객체, 자료, 자료, 자료}
```
```javascript
const 구름 = {
    이름: '구름',
    나이: 6,
    종족: '강아지'
}
const 별 = {
    ...구름,
    이름: '별', // 기존의 속성 덮어 쓰기
    나이: 1, // 기존의 속성 덮어쓰기
    예방접종: true
}

console.log(JSON.stringify(구름))
console.log(JSON.stringify(별))
```
참고로 객체는 전개 순서가 중요하다! 전개라는 이름처럼 전개한 부분에 객체가 펼쳐진다.  
```javascript
const 별 = {
    ...구름,
    이름: '별',
    나이: 1,
    예방접종: true
}
-> 
const 별 = {
    이름 : '구름',
    나이 : 6,
    종족 : '강아지' // 이렇게 전개된다

    이름 : '별',
    나이 : 1,
    예방접종 : true
}
```
만약 전개를 뒤에서 한다면 뒤에서 전개된다. 뒤에 있는 이름과 나이가 앞에 있는 이름과 나이를 덮어쓴다.  
```javascript
const 구름 = {
    이름: '구름',
    나이: 6,
    종족: '강아지'
}
const 별 = {
    이름: '별', // 기존의 속성 덮어 쓰기
    나이: 1, // 기존의 속성 덮어쓰기
    예방접종: true,
    ...구름
}

console.log(JSON.stringify(구름))
console.log(JSON.stringify(별))
```

## 마무리
속성 존재 여부 확인은 객체 내부에 어떤 속성이 있는지 확인하는 것을 의미한다. 객체에 없는 속성은 접근하면 udefined가 나오는데 이를 활용하면 된다.  
다중 할당은 배열과 객체 `하나로` 여럽 변수에 값을 할당하는 것을 의미한다.  
얕은 복사(참조 복사)는 복사하는 행위가 단순하게 다른 이름을 붙이는 형태로 동작하는 복사를 의미한다.  
깊은 복사는 복사 후 두 객체를 완전하게 독립적으로 사용할 수 있는 복사를 의미한다.  

구글에 popular javascript libraries 2020 등으로 검색해서 자바스크립트 라이브러리를 살펴본후 이름을 7개만 적어라. 이름만 적지말고 어떤 라이브러리인지도 꼭 살펴봐라.  
리액트, 뷰, 제이쿼리, Luxon, Day.js, Anime.js, D3.js, Chart.js, Three.js, Voca.js, TensorFlow.js 등을 찾을 수 있다. 